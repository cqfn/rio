
## Results


All results were calculated in nanoseconds and converted to millis then.
Each benchmark run has warm-up stage = `Count/10`.

Targets: `make` command generates random files with different sizes (1M, 10M, 100M and 1G)
to use for tests. File sizes are not fair, it's 1KB block multiplied by count factor:
 - 1M   = 1000 * 1024
 - 10M  = 10000 * 1024
 - 100M = 100000 * 1024
 - 1G = 1000000 * 1024

Benchmarks tests are:
 - `Read` - read file from disk as `Publisher<ByteBuffer>` and swallow data with empty consumer
 - `Write` - generate `Publisher<ByteBuffer>` programmatically (creating `byte[1024]` source array only once before tests)
 and write this pubisher to disk
 - `Copy` - read file from disk as `Publisher<ByteBuffer>` and write this publisher to another file async

Benchmarks results from AWS EC2 `m4.large` with 40GB SSD io2 20000 IOPS.
The legend:
 - PR - the name of reactive IO provider (Vertx, WebFlux, rio)
 - cnt - number of test runs
 - size - total size of processed data
 - PRL - number of parallel IO operations in each test run
 - AVG - average time for each test run
 - STDDEV - standard deviation for each test run
 - STDERR - standard error for each test run
 - speed - total speed for all test runs

## Read tests

Read tests read a file from disk into dummy consumer that did nothing.

### 1K files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 1000 | 1000.00 KB | 1 | 0.2658 | 0.5702 | 0.0180 | 3.67 MB/s |
|  Vertx | 1000 | 1000.00 KB | 1 | 0.6955 | 0.7605 | 0.0241 | 1.40 MB/s |
|   Flux | 1000 | 1000.00 KB | 1 | 0.4108 | 0.4996 | 0.0158 | 2.38 MB/s |
|    Rio | 1000 | 9.77 MB | 10 | 0.6125 | 0.7345 | 0.0232 | 15.94 MB/s |
|  Vertx | 1000 | 9.77 MB | 10 | 1.6825 | 1.0338 | 0.0327 | 5.80 MB/s |
|   Flux | 1000 | 9.77 MB | 10 | 1.2697 | 1.1475 | 0.0363 | 7.69 MB/s |
|    Rio | 1000 | 97.66 MB | 100 | 2.0074 | 2.2066 | 0.0698 | 48.65 MB/s |
|  Vertx | 1000 | 97.66 MB | 100 | 6.0481 | 1.6185 | 0.0512 | 16.15 MB/s |
|   Flux | 1000 | 97.66 MB | 100 | 5.2331 | 2.9116 | 0.0921 | 18.66 MB/s |
|    Rio | 1000 | 976.56 MB | 1000 | 10.0243 | 5.6881 | 0.1799 | 97.42 MB/s |
|  Vertx | 1000 | 976.56 MB | 1000 | 32.0072 | 6.0575 | 0.1916 | 30.51 MB/s |
|   Flux | 1000 | 976.56 MB | 1000 | 35.0093 | 6.1796 | 0.1954 | 27.89 MB/s |
   
### 1M files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 1000 | 1000.00 MB | 1 | 1.1881 | 0.6444 | 0.0204 | 841.69 MB/s |
|  Vertx | 1000 | 1000.00 MB | 1 | 5.5556 | 1.3047 | 0.0413 | 180.00 MB/s |
|   Flux | 1000 | 1000.00 MB | 1 | 1.7964 | 1.8505 | 0.0585 | 556.68 MB/s |
|    Rio | 1000 | 9.77 GB | 10 | 6.1322 | 8.9663 | 0.2835 | 1.59 GB/s |
|  Vertx | 1000 | 9.77 GB | 10 | 18.5530 | 2.2011 | 0.0696 | 539.00 MB/s |
|   Flux | 1000 | 9.77 GB | 10 | 11.7286 | 4.2758 | 0.1352 | 852.62 MB/s |
|    Rio | 100 | 9.77 GB | 100 | 48.8835 | 26.7561 | 2.6756 | 2.00 GB/s |
|  Vertx | 100 | 9.77 GB | 100 | 154.0339 | 13.2801 | 1.3280 | 649.21 MB/s |
|   Flux | 100 | 9.77 GB | 100 | 118.7080 | 14.7951 | 1.4795 | 842.40 MB/s |
|    Rio | 10 | 9.77 GB | 1000 | 503.9325 | 83.9948 | 26.5615 | 1.94 GB/s |
|  Vertx | 10 | 9.77 GB | 1000 | 1666.3790 | 134.9459 | 42.6736 | 600.10 MB/s |
|   Flux | 10 | 9.77 GB | 1000 | 1171.8080 | 63.1046 | 19.9554 | 853.38 MB/s |
   
### 10M files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 100 | 1000.00 MB | 1 | 10.7626 | 2.4073 | 0.2407 | 929.15 MB/s |
|  Vertx | 100 | 1000.00 MB | 1 | 59.7974 | 9.0713 | 0.9071 | 167.23 MB/s |
|   Flux | 100 | 1000.00 MB | 1 | 15.8537 | 8.5581 | 0.8558 | 630.77 MB/s |
|    Rio | 10 | 1000.00 MB | 10 | 91.5214 | 8.5529 | 2.7047 | 1.07 GB/s |
|  Vertx | 10 | 1000.00 MB | 10 | 190.2794 | 21.1245 | 6.6802 | 525.54 MB/s |
|   Flux | 10 | 1000.00 MB | 10 | 195.7608 | 54.8790 | 17.3543 | 510.83 MB/s |
|    Rio | 3 | 900.00 MB | 30 | 276.7356 | 23.5460 | 13.5943 | 1.06 GB/s |
|  Vertx | 3 | 900.00 MB | 30 | 602.1944 | 34.8348 | 20.1119 | 498.18 MB/s |
|   Flux | 3 | 900.00 MB | 30 | 479.4599 | 23.7070 | 13.6873 | 625.70 MB/s |
   
### 100M files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 50 | 4.88 GB | 1 | 86.1801 | 36.7054 | 5.1909 | 1.13 GB/s |
|  Vertx | 50 | 4.88 GB | 1 | 616.1130 | 15.9682 | 2.2582 | 162.31 MB/s |
|   Flux | 50 | 4.88 GB | 1 | 125.4688 | 30.2350 | 4.2759 | 797.01 MB/s |
|    Rio | 5 | 4.88 GB | 10 | 595.1500 | 185.2519 | 82.8471 | 1.64 GB/s |
|  Vertx | 5 | 4.88 GB | 10 | 1716.3567 | 157.8143 | 70.5767 | 582.63 MB/s |
|   Flux | 5 | 4.88 GB | 10 | 1156.7756 | 172.0956 | 76.9635 | 864.47 MB/s |
|    Rio | 3 | 5.86 GB | 20 | 1141.0720 | 23.9730 | 13.8408 | 1.71 GB/s |
|  Vertx | 3 | 5.86 GB | 20 | 3158.3606 | 230.8486 | 133.2805 | 633.24 MB/s |
|   Flux | 3 | 5.86 GB | 20 | 2677.4845 | 457.5039 | 264.1400 | 746.97 MB/s |
   
### 1G files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 3 | 3.00 GB | 1 | 918.4428 | 292.4951 | 168.8721 | 1.09 GB/s |
|  Vertx | 3 | 3.00 GB | 1 | 6138.4310 | 283.2674 | 163.5445 | 166.82 MB/s |
|   Flux | 3 | 3.00 GB | 1 | 1316.6038 | 216.1250 | 124.7798 | 777.76 MB/s |
|    Rio | 3 | 6.00 GB | 2 | 1156.7327 | 101.6215 | 58.6712 | 1.73 GB/s |
|  Vertx | 3 | 6.00 GB | 2 | 5280.6449 | 106.8262 | 61.6761 | 387.83 MB/s |
|   Flux | 3 | 6.00 GB | 2 | 2348.1679 | 127.1736 | 73.4237 | 872.17 MB/s |

## Write tests

Write tests writes pre-generated byte buffers (about zero cost for creating in test) into file on disk.

### 1K files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 1000 | 1000.00 KB | 1 | 0.3539 | 0.7392 | 0.0234 | 2.76 MB/s |
|  Vertx | 1000 | 1000.00 KB | 1 | 1.0352 | 0.8328 | 0.0263 | 965.95 KB/s |
|   Flux | 1000 | 1000.00 KB | 1 | 0.4171 | 0.5192 | 0.0164 | 2.34 MB/s |
|    Rio | 1000 | 9.77 MB | 10 | 0.5411 | 0.6698 | 0.0212 | 18.05 MB/s |
|  Vertx | 1000 | 9.77 MB | 10 | 2.6786 | 1.4254 | 0.0451 | 3.65 MB/s |
|   Flux | 1000 | 9.77 MB | 10 | 1.0754 | 0.7092 | 0.0224 | 9.08 MB/s |
|    Rio | 100 | 9.77 MB | 100 | 2.2331 | 1.2984 | 0.1298 | 43.73 MB/s |
|  Vertx | 100 | 9.77 MB | 100 | 12.1945 | 1.5494 | 0.1549 | 8.01 MB/s |
|   Flux | 100 | 9.77 MB | 100 | 8.8625 | 2.8468 | 0.2847 | 11.02 MB/s |
|    Rio | 100 | 97.66 MB | 1000 | 12.4153 | 5.2551 | 0.5255 | 78.66 MB/s |
|  Vertx | 100 | 97.66 MB | 1000 | 68.4329 | 13.8412 | 1.3841 | 14.27 MB/s |
|   Flux | 100 | 97.66 MB | 1000 | 30.4435 | 15.6309 | 1.5631 | 32.08 MB/s |
   
### 1M files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 1000 | 1000.00 MB | 1 | 1.9411 | 0.8894 | 0.0281 | 515.16 MB/s |
|  Vertx | 1000 | 1000.00 MB | 1 | 18.1896 | 4.3730 | 0.1383 | 54.98 MB/s |
|   Flux | 1000 | 1000.00 MB | 1 | 4.4891 | 2.9077 | 0.0920 | 222.76 MB/s |
|    Rio | 1000 | 9.77 GB | 10 | 13.1222 | 2.6641 | 0.0842 | 762.07 MB/s |
|  Vertx | 1000 | 9.77 GB | 10 | 186.4106 | 31.6588 | 1.0011 | 53.65 MB/s |
|   Flux | 1000 | 9.77 GB | 10 | 44.0761 | 9.5911 | 0.3033 | 226.88 MB/s |
|    Rio | 100 | 9.77 GB | 100 | 138.6782 | 11.2211 | 1.1221 | 721.09 MB/s |
|  Vertx | 100 | 9.77 GB | 100 | 1862.1139 | 9.8860 | 0.9886 | 53.70 MB/s |
|   Flux | 100 | 9.77 GB | 100 | 487.2991 | 23.8710 | 2.3871 | 205.21 MB/s |
|    Rio | 10 | 1000.00 MB | 100 | 167.9636 | 31.4381 | 9.9416 | 595.37 MB/s |
|  Vertx | 10 | 1000.00 MB | 100 | 1864.4311 | 0.3600 | 0.1138 | 53.64 MB/s |
|   Flux | 10 | 1000.00 MB | 100 | 768.8858 | 127.8018 | 40.4145 | 130.06 MB/s |
|    Rio | 3 | 900.00 MB | 300 | 483.9835 | 49.2637 | 28.4424 | 619.86 MB/s |
|  Vertx | 3 | 900.00 MB | 300 | 5949.9329 | 255.9340 | 147.7636 | 50.42 MB/s |
|   Flux | 3 | 900.00 MB | 300 | 2375.1227 | 463.0244 | 267.3273 | 126.31 MB/s |
   
### 10M files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 100 | 1000.00 MB | 1 | 18.3807 | 5.7307 | 0.5731 | 544.05 MB/s |
|  Vertx | 100 | 1000.00 MB | 1 | 177.7372 | 26.0655 | 2.6066 | 56.26 MB/s |
|   Flux | 100 | 1000.00 MB | 1 | 49.0719 | 18.0751 | 1.8075 | 203.78 MB/s |
|    Rio | 10 | 1000.00 MB | 10 | 152.0109 | 26.1508 | 8.2696 | 657.85 MB/s |
|  Vertx | 10 | 1000.00 MB | 10 | 1862.8861 | 1.1886 | 0.3759 | 53.68 MB/s |
|   Flux | 10 | 1000.00 MB | 10 | 487.6816 | 63.2540 | 20.0027 | 205.05 MB/s |
|    Rio | 5 | 1000.00 MB | 20 | 310.1501 | 50.0047 | 22.3628 | 644.85 MB/s |
|  Vertx | 5 | 1000.00 MB | 20 | 3720.0799 | 12.7777 | 5.7144 | 53.76 MB/s |
|   Flux | 5 | 1000.00 MB | 20 | 1149.4646 | 208.4034 | 93.2009 | 173.99 MB/s |
|    Rio | 3 | 900.00 MB | 30 | 461.6671 | 65.1967 | 37.6413 | 649.82 MB/s |
|  Vertx | 3 | 900.00 MB | 30 | 6052.7234 | 377.2584 | 217.8102 | 49.56 MB/s |
|   Flux | 3 | 900.00 MB | 30 | 2077.4746 | 343.0548 | 198.0628 | 144.41 MB/s |
   
### 100M files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 50 | 4.88 GB | 1 | 187.2466 | 7.9968 | 1.1309 | 534.06 MB/s |
|  Vertx | 50 | 4.88 GB | 1 | 1997.0412 | 581.0320 | 82.1703 | 50.07 MB/s |
|   Flux | 50 | 4.88 GB | 1 | 431.7884 | 12.1490 | 1.7181 | 231.59 MB/s |
|    Rio | 5 | 4.88 GB | 10 | 1447.0634 | 78.4022 | 35.0626 | 691.05 MB/s |
|  Vertx | 5 | 4.88 GB | 10 | 13318.6614 | 4689.5994 | 2097.2526 | 75.08 MB/s |
|   Flux | 5 | 4.88 GB | 10 | 5021.3340 | 263.5366 | 117.8572 | 199.15 MB/s |
|    Rio | 3 | 5.86 GB | 20 | 35626.4839 | 498.7560 | 287.9569 | 56.14 MB/s |
|  Vertx | 3 | 5.86 GB | 20 | 19602.3857 | 1003.8309 | 579.5621 | 102.03 MB/s |
|   Flux | 3 | 5.86 GB | 20 | 37166.2301 | 261.4055 | 150.9226 | 53.81 MB/s |
   
### 1G files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 3 | 9.00 GB | 3 | 57266.1972 | 98.1073 | 56.6423 | 53.64 MB/s |
|  Vertx | 3 | 9.00 GB | 3 | 39247.7749 | 636.5942 | 367.5378 | 78.27 MB/s |
|   Flux | 3 | 9.00 GB | 3 | 57746.5870 | 829.6007 | 478.9702 | 53.20 MB/s |
|    Rio | 3 | 9.00 GB | 3 | 49600.5333 | 12842.2687 | 7414.4873 | 61.93 MB/s |
|  Vertx | 3 | 9.00 GB | 3 | 38309.5225 | 635.0336 | 366.6368 | 80.19 MB/s |
|   Flux | 3 | 9.00 GB | 3 | 56955.4847 | 1020.3259 | 589.0854 | 53.94 MB/s |
   
## Copy tests

Copy test reads a file from disk and write to another file on disk

### 1M files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 1000 | 1000.00 MB | 1 | 2.1211 | 4.1053 | 0.1298 | 471.44 MB/s |
|  Vertx | 1000 | 1000.00 MB | 1 | 17.6898 | 2.8535 | 0.0902 | 56.53 MB/s |
|   Flux | 1000 | 1000.00 MB | 1 | 3.5754 | 4.8137 | 0.1522 | 279.69 MB/s |
|    Rio | 100 | 1000.00 MB | 10 | 16.0689 | 15.1825 | 1.5182 | 622.32 MB/s |
|  Vertx | 100 | 1000.00 MB | 10 | 182.8950 | 95.6818 | 9.5682 | 54.68 MB/s |
|   Flux | 100 | 1000.00 MB | 10 | 41.6274 | 19.7662 | 1.9766 | 240.23 MB/s |
|    Rio | 10 | 1000.00 MB | 100 | 197.5651 | 32.6213 | 10.3158 | 506.16 MB/s |
|  Vertx | 10 | 1000.00 MB | 100 | 1925.3023 | 402.6246 | 127.3211 | 51.94 MB/s |
|   Flux | 10 | 1000.00 MB | 100 | 415.6902 | 68.0314 | 21.5134 | 240.56 MB/s |
|    Rio | 10 | 1000.00 MB | 100 | 192.2087 | 83.4551 | 26.3908 | 520.27 MB/s |
|  Vertx | 10 | 1000.00 MB | 100 | 1865.4721 | 2.3917 | 0.7563 | 53.61 MB/s |
|   Flux | 10 | 1000.00 MB | 100 | 565.1271 | 73.9616 | 23.3887 | 176.95 MB/s |
   
### 10M files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 100 | 1000.00 MB | 1 | 21.3083 | 15.8902 | 1.5890 | 469.30 MB/s |
|  Vertx | 100 | 1000.00 MB | 1 | 181.5159 | 20.2302 | 2.0230 | 55.09 MB/s |
|   Flux | 100 | 1000.00 MB | 1 | 28.7937 | 24.4758 | 2.4476 | 347.30 MB/s |
|    Rio | 10 | 1000.00 MB | 10 | 151.8477 | 78.3629 | 24.7805 | 658.55 MB/s |
|  Vertx | 10 | 1000.00 MB | 10 | 1833.2985 | 219.7303 | 69.4848 | 54.55 MB/s |
|   Flux | 10 | 1000.00 MB | 10 | 451.7772 | 67.7273 | 21.4172 | 221.35 MB/s |
|    Rio | 5 | 1000.00 MB | 20 | 308.6006 | 87.0037 | 38.9092 | 648.09 MB/s |
|  Vertx | 5 | 1000.00 MB | 20 | 3725.9840 | 23.1923 | 10.3719 | 53.68 MB/s |
|   Flux | 5 | 1000.00 MB | 20 | 862.6347 | 66.4952 | 29.7376 | 231.85 MB/s |
|    Rio | 3 | 900.00 MB | 30 | 461.7920 | 156.0699 | 90.1070 | 649.64 MB/s |
|  Vertx | 3 | 900.00 MB | 30 | 5577.3815 | 32.1534 | 18.5638 | 53.79 MB/s |
|   Flux | 3 | 900.00 MB | 30 | 1303.4608 | 134.2849 | 77.5294 | 230.16 MB/s |
   
### 100M files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 50 | 500.00 MB | 1 | 26.2621 | 18.6329 | 2.6351 | 380.78 MB/s |
|  Vertx | 50 | 500.00 MB | 1 | 205.6170 | 102.7595 | 14.5324 | 48.63 MB/s |
|   Flux | 50 | 500.00 MB | 1 | 48.6656 | 51.2788 | 7.2519 | 205.48 MB/s |
|    Rio | 5 | 500.00 MB | 10 | 195.9164 | 93.2087 | 41.6842 | 510.42 MB/s |
|  Vertx | 5 | 500.00 MB | 10 | 1862.3012 | 0.7941 | 0.3551 | 53.70 MB/s |
|   Flux | 5 | 500.00 MB | 10 | 504.6793 | 148.0385 | 66.2048 | 198.15 MB/s |
|    Rio | 3 | 600.00 MB | 20 | 325.0288 | 121.6332 | 70.2250 | 615.33 MB/s |
|  Vertx | 3 | 600.00 MB | 20 | 3986.2303 | 512.3094 | 295.7820 | 50.17 MB/s |
|   Flux | 3 | 600.00 MB | 20 | 919.0226 | 112.8517 | 65.1550 | 217.62 MB/s |
   
### 1G files

|    PR  | cnt  | size       | PRL | AVG  | STDDEV | STDERR | speed |
|:-------|-----:|-----------:|----:|-----:|-------:|-------:|------:|
|    Rio | 3 | 3.00 GB | 1 | 13711.6491 | 9726.3939 | 5615.5362 | 74.68 MB/s |
|  Vertx | 3 | 3.00 GB | 1 | 8267.7226 | 180.3911 | 104.1488 | 123.86 MB/s |
|   Flux | 3 | 3.00 GB | 1 | 4931.6362 | 1994.6865 | 1151.6328 | 207.64 MB/s |
|    Rio | 3 | 6.00 GB | 2 | 39766.3874 | 3811.8194 | 2200.7550 | 51.50 MB/s |
|  Vertx | 3 | 6.00 GB | 2 | 17099.7282 | 624.9359 | 360.8069 | 119.77 MB/s |
|   Flux | 3 | 6.00 GB | 2 | 38147.3782 | 1247.2875 | 720.1218 | 53.69 MB/s |
   
## Usage

It's recommended to use dedicated Linux instance to run benchmarks.

TO run it on AWS EC2 instance with Amazon Linux you have to install these tools before:
 - OpenJDK11
 - Maven 3.3+
 - git

Clone `cqfn/rio` repository to EC2 instance, `cd` into `./benchmarks` dir, run `make` command, see the results.
